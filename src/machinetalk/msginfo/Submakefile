MSGINFO_DIR=machinetalk/msginfo
INCLUDES += $(MSGINFO_DIR)

# NANOPB_CFLAGS is set in  protobuf/Submakefile
# for msgcomponents when building an RT comp
# or at least should - the reference to NANOPB_CFLAGS isnt resolved here; no idea why

RTFLAGS +=   $(PROTO_NANOPB_CFLAGS)

obj-m += msginfo.o
msginfo-objs := \
	$(MSGINFO_DIR)/rt_msginfo.o	\
	$(MSGINFO_DIR)/msginfo_api.o	\
	$(PBGEN)/canon.npb.o \
	$(PBGEN)/config.npb.o \
	$(PBGEN)/emcclass.npb.o \
	$(PBGEN)/log.npb.o \
	$(PBGEN)/message.npb.o \
	$(PBGEN)/motcmds.npb.o \
	$(PBGEN)/object.npb.o  \
	$(PBGEN)/preview.npb.o \
	$(PBGEN)/rtapicommand.npb.o \
	$(PBGEN)/rtapi_message.npb.o \
	$(PBGEN)/status.npb.o \
	$(PBGEN)/task.npb.o \
	$(PBGEN)/test.npb.o \
	$(PBGEN)/types.npb.o \
	$(PBGEN)/value.npb.o


ifneq "$(filter normal user-dso,$(BUILD_SYS))" ""
$(RTLIBDIR)/msginfo$(MODULE_EXT): $(addprefix $(OBJDIR)/,$(msginfo-objs))
endif
